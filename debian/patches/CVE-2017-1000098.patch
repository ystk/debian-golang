Origin: https://github.com/golang/go/commit/f0fa13b346c1be50aae0eb4349a7c09bdc5826fc
Reviewed-by: Chris Lamb <lamby@debian.org>
Reviewed-by: Sylvain Beucler <beuc@debian.org>
Last-Update: 2021-02-26

--- golang-1.0.2.orig/src/pkg/mime/multipart/formdata.go
+++ golang-1.0.2/src/pkg/mime/multipart/formdata.go
@@ -75,8 +75,10 @@ func (r *Reader) ReadForm(maxMemory int6
 			if err != nil {
 				return nil, err
 			}
-			defer file.Close()
 			_, err = io.Copy(file, io.MultiReader(&b, p))
+			if cerr := file.Close(); err == nil {
+				err = cerr
+			}
 			if err != nil {
 				os.Remove(file.Name())
 				return nil, err
